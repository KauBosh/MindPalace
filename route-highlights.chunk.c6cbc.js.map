{"version":3,"sources":["webpack:///route-highlights.chunk.c6cbc.js","webpack:///./routes/highlights/index.js"],"names":["webpackJsonp","jsGl","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__components_Traverse__","n","__WEBPACK_IMPORTED_MODULE_2_preact_router_match__","__WEBPACK_IMPORTED_MODULE_3__utils_date__","__WEBPACK_IMPORTED_MODULE_4_unistore_preact__","_ref2","title","className","_ref3","class","_ref4","Highlights","_temp","_this","_ret","_len","arguments","length","args","Array","_key","this","_Component","apply","concat","state","years","getData","highlights","props","db","keys","reduce","current","date","year","substring","push","parse","forEach","sort","sortDates","setState","componentDidMount","render","a","b","Number","map","key","ymd","href","url","shortDate","Component","connect"],"mappings":"AAAAA,cAAc,IAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAcA,SAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIC,WAAU,iEAAoED,GAAeD,GAASG,UAAYC,OAAOC,OAAOJ,GAAcA,EAAWE,WAAaG,aAAeC,MAAOP,EAAUQ,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeT,IAAYG,OAAOO,eAAiBP,OAAOO,eAAeX,EAAUC,GAAcD,EAASY,UAAYX,GAfjeG,OAAOS,eAAepB,EAAqB,cAAgBc,OAAO,GAC7C,IAAIO,GAAuCpB,EAAoB,QAE3DqB,GAD+CrB,EAAoBsB,EAAEF,GAChBpB,EAAoB,SACzEuB,EAAoDvB,EAAoB,QAExEwB,GAD4DxB,EAAoBsB,EAAEC,GACtCvB,EAAoB,SAChEyB,EAAgDzB,EAAoB,QAgBzF0B,GAf6E1B,EAAoBsB,EAAEG,GCuB/F,YAAC,KAASE,MAAM,aAAaC,UAAU,oBDN3CC,ECOI,iBAAGC,MAAM,aAAT,kEDDJC,ECsBM,iBAAGD,MAAM,QAAT,iFArDJE,E,YDwCJ,QAASA,KAKP,IAAK,GAJDC,GAAOC,EAAOC,EAITC,EAAOC,UAAUC,OAAQC,EAAOC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAC3EF,EAAKE,GAAQJ,UAAUI,EAGzB,OAAeR,GAASC,EAAQjC,EAA2ByC,KAAMC,EAAWxC,KAAKyC,MAAMD,GAAaD,MAAMG,OAAON,KAAiBL,EChDpIY,OACEC,U,EAOFC,QAAU,+CACFC,GACAF,CADa,wBAAM,EAAKG,MAAMC,GAAGC,KAAK,eAAzB,2BAAbH,GAAa,EACbF,EAAQE,EAAWI,OAAO,SAACC,EAASC,GACxC,GAAMC,GAAOD,EAAKE,UAAU,EAAG,EAG/B,OAFKH,GAAQE,KAAOF,EAAQE,OAC5BF,EAAQE,GAAME,KAAKC,YAAMJ,IAClBD,OAGT5C,OAAO0C,KAAKL,GAAOa,QAAQ,SAAAJ,GACzBT,EAAMS,GAAMK,KAAKC,OAGnB,EAAKC,UAAWhB,UAZG,iCDuCZZ,E,SA2ET,MAtFA9B,GAAU2B,EAAYW,GAwCtBX,EAAWvB,UCzEXuD,kB,WACEtB,KAAKM,WD4EPhB,EAAWvB,UCzDXwD,O,SAAOf,E,GAAkB,GAATH,GAAS,EAATA,MACRK,EAAO1C,OAAO0C,KAAKL,EAGzB,OAFAK,GAAKS,KAAK,SAACK,EAAGC,GAAJ,MAAUC,QAAOD,GAAKC,OAAOF,KAGrC,mBAAKpC,MAAM,sBAAX,IAKGsB,EAAKd,OACJc,EAAKiB,IAAI,SAAAb,GAAA,MACP,oBAAKc,IAAKd,EAAM1B,MAAM,aACpB,sBAAK0B,GACL,kBAAI1B,MAAM,uCACPiB,EAAMS,GAAMa,IAAI,SAAAd,GACf,MACE,mBAAIe,IAAKC,YAAIhB,IACX,YAAC,QAAKiB,KAAMC,YAAIlB,EAAM,cAAezB,MAAM,UACxC4C,YAAUnB,WAT1B,IDyFAvB,GC5HgB2C,YA+DVC,6BAAQ,MAAM5C","file":"route-highlights.chunk.c6cbc.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ \"jsGl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Traverse__ = __webpack_require__(\"db16\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_router_match__ = __webpack_require__(\"sw5u\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_router_match___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_router_match__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_date__ = __webpack_require__(\"8EZx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_unistore_preact__ = __webpack_require__(\"o6ac\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_unistore_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_unistore_preact__);\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_1__components_Traverse__[\"a\" /* default */], { title: 'Highlights', className: 'traverse--left' });\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'p',\n  { 'class': 'left mt20' },\n  'Take a look back on the year, and reflect on your top moments.'\n);\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'p',\n  { 'class': 'left' },\n  'No highlights just yet? Not worries, keep your head up, and start writing! \\uD83D\\uDE0A'\n);\n\nvar Highlights = function (_Component) {\n  _inherits(Highlights, _Component);\n\n  function Highlights() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Highlights);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      years: {}\n    }, _this.getData = function () {\n      return new Promise(function ($return, $error) {\n        var highlights, years;\n        return Promise.resolve(_this.props.db.keys('highlights')).then(function ($await_1) {\n          try {\n            highlights = $await_1;\n            years = highlights.reduce(function (current, date) {\n              var year = date.substring(0, 4);\n              if (!current[year]) current[year] = [];\n              current[year].push(Object(__WEBPACK_IMPORTED_MODULE_3__utils_date__[\"h\" /* parse */])(date));\n              return current;\n            }, {});\n\n            Object.keys(years).forEach(function (year) {\n              years[year].sort(__WEBPACK_IMPORTED_MODULE_3__utils_date__[\"k\" /* sortDates */]);\n            });\n\n            _this.setState({ years: years });\n            return $return();\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }, $error);\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Highlights.prototype.componentDidMount = function componentDidMount() {\n    this.getData();\n  };\n\n  Highlights.prototype.render = function render(props, _ref) {\n    var years = _ref.years;\n\n    var keys = Object.keys(years);\n    keys.sort(function (a, b) {\n      return Number(b) - Number(a);\n    });\n\n    return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'div',\n      { 'class': 'wrap lift-children' },\n      _ref2,\n      _ref3,\n      keys.length ? keys.map(function (year) {\n        return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'div',\n          { key: year, 'class': 'left mt20' },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'h2',\n            null,\n            year\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'ul',\n            { 'class': 'year-overview year-overview--center' },\n            years[year].map(function (date) {\n              return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n                'li',\n                { key: Object(__WEBPACK_IMPORTED_MODULE_3__utils_date__[\"m\" /* ymd */])(date) },\n                Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n                  __WEBPACK_IMPORTED_MODULE_2_preact_router_match__[\"Link\"],\n                  { href: Object(__WEBPACK_IMPORTED_MODULE_3__utils_date__[\"l\" /* url */])(date, 'highlights'), 'class': 'button' },\n                  Object(__WEBPACK_IMPORTED_MODULE_3__utils_date__[\"j\" /* shortDate */])(date)\n                )\n              );\n            })\n          )\n        );\n      }) : _ref4\n    );\n  };\n\n  return Highlights;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_4_unistore_preact__[\"connect\"])('db')(Highlights));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-highlights.chunk.c6cbc.js","import { h, Component } from 'preact';\nimport Traverse from '../../components/Traverse';\nimport { Link } from 'preact-router/match';\nimport { parse, ymd, url, sortDates, shortDate } from '../../utils/date';\nimport { connect } from 'unistore/preact';\n\nclass Highlights extends Component {\n  state = {\n    years: {},\n  };\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  getData = async () => {\n    const highlights = await this.props.db.keys('highlights');\n    const years = highlights.reduce((current, date) => {\n      const year = date.substring(0, 4);\n      if (!current[year]) current[year] = [];\n      current[year].push(parse(date));\n      return current;\n    }, {});\n\n    Object.keys(years).forEach(year => {\n      years[year].sort(sortDates);\n    });\n\n    this.setState({ years });\n  };\n\n  render(props, { years }) {\n    const keys = Object.keys(years);\n    keys.sort((a, b) => Number(b) - Number(a));\n\n    return (\n      <div class=\"wrap lift-children\">\n        <Traverse title=\"Highlights\" className=\"traverse--left\" />\n        <p class=\"left mt20\">\n          Take a look back on the year, and reflect on your top moments.\n        </p>\n        {keys.length ? (\n          keys.map(year => (\n            <div key={year} class=\"left mt20\">\n              <h2>{year}</h2>\n              <ul class=\"year-overview year-overview--center\">\n                {years[year].map(date => {\n                  return (\n                    <li key={ymd(date)}>\n                      <Link href={url(date, 'highlights')} class=\"button\">\n                        {shortDate(date)}\n                      </Link>\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n          ))\n        ) : (\n          <p class=\"left\">\n            No highlights just yet? Not worries, keep your head up, and start\n            writing! ðŸ˜Š\n          </p>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default connect('db')(Highlights);\n\n\n\n// WEBPACK FOOTER //\n// ./routes/highlights/index.js"],"sourceRoot":""}