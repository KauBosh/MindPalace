{"version":3,"sources":["webpack:///route-day.chunk.9ceef.js","webpack:///./components/QuestionTextarea/index.js","webpack:///./components/StarPicker/index.js","webpack:///./components/NumberPicker/index.js","webpack:///./components/SelectPicker/index.js","webpack:///./components/CheckboxPicker/index.js","webpack:///./components/TogglePicker/Index.js","webpack:///./components/RangePicker/index.js","webpack:///./components/PlusPicker/PlusPicker.js","webpack:///./routes/day/index.js"],"names":["webpackJsonp","Hy3g","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","day__classCallCheck","instance","Constructor","day__possibleConstructorReturn","day__inherits","defineProperty","preact_min","match","utils_date","utils_questions","Traverse","preact","QuestionTextarea","onInput","id","label","key","class","for","dir","placeholder","event","target","style","height","getBoundingClientRect","scrollHeight","_ref2","width","xmlns","d","fill","stroke","stroke-width","fill-rule","stroke-linecap","stroke-linejoin","StarPicker","onChange","map","v","type","checked","aria-label","NumberPicker","settings","undefined","default","min","max","step","autocomplete","Number","SelectPicker","options","e","option","CheckboxPicker","includes","TogglePicker","filter","Boolean","RangePicker","hasValue","val","PlusPicker","this","_Component","apply","arguments","addStep","props","Math","removeStep","render","onClick","Component","_extends","assign","i","length","source","hasOwnProperty","_ref5","href","Day","_temp","_this","_ret","_len","args","Array","_key","concat","state","date","questions","trackingQuestions","highlighted","clicked","yesterday","tomorrow","getData","keys","answers","setIndex","dataset","goal","closest","trackingAnswers","day","month","year","db","set","Date","ymd","toString","window","location","url","Promise","all","x","get","getTrackingQuestions","sort","a","b","createdAt","slug","forEach","question","index","answer","visible","status","reduce","prev","curr","abs","indexOf","parseToUrl","then","results","find","questionId","showNotes","notes","setState","setTextareaHeights","getAll","entries","isAnswerValid","dateString","highlightDay","delete","updateAnswer","updateTrackingAnswer","now","toggleTrackingOption","updateTrackingNotes","componentDidMount","componentWillReceiveProps","document","querySelectorAll","el","yesterdayDate","setDate","getDate","yesterdayUrl","tomorrowDate","tomorrowUrl","title","format","lastLink","nextLink","actions","viewBox","text","data-question-type","connect"],"mappings":"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","file":"route-day.chunk.9ceef.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ \"Hy3g\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ../node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"KM04\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ../node_modules/preact-router/match.js\nvar match = __webpack_require__(\"sw5u\");\nvar match_default = /*#__PURE__*/__webpack_require__.n(match);\n\n// EXTERNAL MODULE: ./utils/date.js\nvar utils_date = __webpack_require__(\"8EZx\");\n\n// EXTERNAL MODULE: ./utils/questions.js\nvar utils_questions = __webpack_require__(\"b1q8\");\n\n// EXTERNAL MODULE: ./components/Traverse/index.js\nvar Traverse = __webpack_require__(\"db16\");\n\n// EXTERNAL MODULE: ../node_modules/unistore/preact.js\nvar preact = __webpack_require__(\"o6ac\");\nvar preact_default = /*#__PURE__*/__webpack_require__.n(preact);\n\n// CONCATENATED MODULE: ./components/QuestionTextarea/index.js\n\n\n\nvar QuestionTextarea_QuestionTextarea = function QuestionTextarea(_ref) {\n  var _onInput = _ref.onInput,\n      id = _ref.id,\n      value = _ref.value,\n      label = _ref.label;\n  return Object(preact_min[\"h\"])(\n    \"div\",\n    { key: id, \"class\": \"question\" },\n    Object(preact_min[\"h\"])(\n      \"label\",\n      { \"for\": id, dir: \"auto\" },\n      label\n    ),\n    Object(preact_min[\"h\"])(\"textarea\", {\n      id: id,\n      dir: \"auto\",\n      value: value,\n      placeholder: \"Start writing...\",\n      onInput: function onInput(event) {\n        event.target.style.height = 'auto';\n        event.target.getBoundingClientRect();\n        event.target.style.height = event.target.scrollHeight + 'px';\n        _onInput(event.target.value);\n      }\n    })\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/StarPicker/index.js\n\n\n\nvar _ref2 = Object(preact_min[\"h\"])(\n  \"svg\",\n  { width: \"28\", height: \"27\", xmlns: \"http://www.w3.org/2000/svg\" },\n  Object(preact_min[\"h\"])(\"path\", {\n    d: \"M18 9.2l9 1.4-6.5 6.4 1.5 9-8-4.3L6 26l1.5-9L1 10.6l9-1.4L14 1z\",\n    fill: \"currentColor\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\",\n    \"fill-rule\": \"evenodd\",\n    \"stroke-linecap\": \"round\",\n    \"stroke-linejoin\": \"round\"\n  })\n);\n\nvar StarPicker_StarPicker = function StarPicker(_ref) {\n  var id = _ref.id,\n      value = _ref.value,\n      _onChange = _ref.onChange;\n  return Object(preact_min[\"h\"])(\n    \"div\",\n    { \"class\": \"stars\" },\n    [1, 2, 3, 4, 5].map(function (v) {\n      return Object(preact_min[\"h\"])(\n        \"div\",\n        null,\n        Object(preact_min[\"h\"])(\"input\", {\n          type: \"checkbox\",\n          value: v,\n          id: id + \"_star_\" + v,\n          \"class\": \"screen-reader-only\",\n          checked: value && v <= value,\n          onChange: function onChange() {\n            return _onChange(v);\n          }\n        }),\n        Object(preact_min[\"h\"])(\n          \"label\",\n          { \"for\": id + \"_star_\" + v, \"aria-label\": v + \" stars\" },\n          _ref2\n        )\n      );\n    })\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/NumberPicker/index.js\n\n\n\nvar NumberPicker_NumberPicker = function NumberPicker(_ref) {\n  var id = _ref.id,\n      value = _ref.value,\n      _ref$settings = _ref.settings,\n      settings = _ref$settings === undefined ? {} : _ref$settings,\n      onChange = _ref.onChange;\n  return Object(preact_min[\"h\"])(\n    \"div\",\n    null,\n    Object(preact_min[\"h\"])(\"input\", {\n      type: \"number\",\n      id: id,\n      value: value !== undefined ? value : settings.default,\n      min: settings.min,\n      max: settings.max,\n      step: settings.step,\n      autocomplete: \"number-picker\",\n      onInput: function onInput(event) {\n        onChange(event.target.value === '' ? settings.default : Number(event.target.value));\n      }\n    })\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/SelectPicker/index.js\n\n\n\nvar SelectPicker_SelectPicker = function SelectPicker(_ref) {\n  var id = _ref.id,\n      value = _ref.value,\n      _ref$options = _ref.options,\n      options = _ref$options === undefined ? [] : _ref$options,\n      _onChange = _ref.onChange;\n  return Object(preact_min[\"h\"])(\n    'select',\n    { id: id, value: value, onChange: function onChange(e) {\n        return _onChange(e.target.value);\n      } },\n    options.map(function (option) {\n      return Object(preact_min[\"h\"])(\n        'option',\n        { key: option, value: option },\n        option\n      );\n    })\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/CheckboxPicker/index.js\n\n\n\nvar CheckboxPicker_CheckboxPicker = function CheckboxPicker(_ref) {\n  var id = _ref.id,\n      _ref$type = _ref.type,\n      type = _ref$type === undefined ? 'checkbox' : _ref$type,\n      value = _ref.value,\n      _ref$options = _ref.options,\n      options = _ref$options === undefined ? [] : _ref$options,\n      _onChange = _ref.onChange;\n  return Object(preact_min[\"h\"])(\n    'div',\n    null,\n    options.map(function (option) {\n      return Object(preact_min[\"h\"])(\n        'div',\n        { 'class': 'c-checkbox', key: option },\n        Object(preact_min[\"h\"])('input', {\n          id: id + '_' + option,\n          'class': 'screen-reader-only',\n          type: type,\n          checked: value.includes(option),\n          onChange: function onChange() {\n            return _onChange(option);\n          }\n        }),\n        Object(preact_min[\"h\"])(\n          'label',\n          { 'for': id + '_' + option },\n          option\n        )\n      );\n    })\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/TogglePicker/Index.js\n\n\n\nvar Index_TogglePicker = function TogglePicker(_ref) {\n  var id = _ref.id,\n      value = _ref.value,\n      _onChange = _ref.onChange;\n\n  var checked = value.includes(true);\n  return Object(preact_min[\"h\"])(\n    \"div\",\n    { \"class\": \"c-checkbox\" },\n    Object(preact_min[\"h\"])(\"input\", {\n      id: id,\n      type: \"checkbox\",\n      \"class\": \"screen-reader-only\",\n      checked: checked,\n      onChange: function onChange() {\n        return _onChange([!checked].filter(Boolean));\n      }\n    }),\n    Object(preact_min[\"h\"])(\n      \"label\",\n      { \"for\": id },\n      ''\n    )\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/RangePicker/index.js\n\n\n\nvar RangePicker_RangePicker = function RangePicker(_ref) {\n  var id = _ref.id,\n      value = _ref.value,\n      _ref$settings = _ref.settings,\n      settings = _ref$settings === undefined ? {} : _ref$settings,\n      onChange = _ref.onChange;\n\n  var hasValue = value !== null && value !== undefined;\n  var val = hasValue ? value : settings.default;\n\n  return Object(preact_min[\"h\"])(\n    \"div\",\n    { \"class\": \"u-flex\" },\n    Object(preact_min[\"h\"])(\n      \"div\",\n      { \"class\": \"u-flex-1 mr20\" },\n      Object(preact_min[\"h\"])(\"input\", {\n        type: \"range\",\n        id: id,\n        value: val,\n        min: settings.min,\n        max: settings.max,\n        step: settings.step,\n        onInput: function onInput(event) {\n          onChange(event.target.value === '' ? settings.default : Number(event.target.value));\n        }\n      })\n    ),\n    Object(preact_min[\"h\"])(\n      \"small\",\n      { \"class\": \"range-label\" },\n      hasValue ? val : 'Not yet set'\n    )\n  );\n};\n\n\n// CONCATENATED MODULE: ./components/PlusPicker/PlusPicker.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar PlusPicker_PlusPicker = function (_Component) {\n  _inherits(PlusPicker, _Component);\n\n  function PlusPicker() {\n    _classCallCheck(this, PlusPicker);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  PlusPicker.prototype.addStep = function addStep() {\n    var _props$settings = this.props.settings,\n        _props$settings$max = _props$settings.max,\n        max = _props$settings$max === undefined ? null : _props$settings$max,\n        _props$settings$step = _props$settings.step,\n        step = _props$settings$step === undefined ? 1 : _props$settings$step;\n\n    var value = Number(this.props.value);\n    var val = value + step;\n\n    if (max !== null) {\n      val = Math.min(val, max);\n    }\n\n    this.props.onChange(val);\n  };\n\n  PlusPicker.prototype.removeStep = function removeStep() {\n    var _props$settings2 = this.props.settings,\n        _props$settings2$min = _props$settings2.min,\n        min = _props$settings2$min === undefined ? null : _props$settings2$min,\n        _props$settings2$step = _props$settings2.step,\n        step = _props$settings2$step === undefined ? 1 : _props$settings2$step;\n\n    var value = Number(this.props.value);\n    var val = value - step;\n\n    if (min !== null) {\n      val = Math.max(val, min);\n    }\n\n    this.props.onChange(val);\n  };\n\n  PlusPicker.prototype.render = function render(_ref) {\n    var _this2 = this;\n\n    var id = _ref.id,\n        value = _ref.value,\n        _ref$settings = _ref.settings,\n        settings = _ref$settings === undefined ? {} : _ref$settings,\n        onChange = _ref.onChange;\n\n    return Object(preact_min[\"h\"])(\n      \"div\",\n      { \"class\": \"plus-picker u-flex\" },\n      Object(preact_min[\"h\"])(\"input\", {\n        \"class\": \"c-input-mini\",\n        type: \"number\",\n        id: id,\n        value: value !== undefined ? value : settings.default,\n        min: settings.min,\n        max: settings.max,\n        step: settings.step,\n        autocomplete: \"plus-picker\",\n        onInput: function onInput(event) {\n          onChange(event.target.value === '' ? settings.default : Number(event.target.value));\n        }\n      }),\n      Object(preact_min[\"h\"])(\n        \"button\",\n        {\n          \"class\": \"button button--mini\",\n          type: \"button\",\n          \"aria-label\": \"Remove\",\n          onClick: function onClick() {\n            return _this2.removeStep();\n          }\n        },\n        \"-\"\n      ),\n      Object(preact_min[\"h\"])(\n        \"button\",\n        {\n          \"class\": \"button button--mini\",\n          type: \"button\",\n          \"aria-label\": \"Add\",\n          onClick: function onClick() {\n            return _this2.addStep();\n          }\n        },\n        \"+\"\n      )\n    );\n  };\n\n  return PlusPicker;\n}(preact_min[\"Component\"]);\n\n\n// CONCATENATED MODULE: ../node_modules/babel-loader/lib??ref--0!./routes/day/index.js\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction day__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction day__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction day__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _ref5 = Object(preact_min[\"h\"])(\n  'div',\n  { 'class': 'center lift mt40' },\n  Object(preact_min[\"h\"])(\n    match[\"Link\"],\n    { href: '/get-started/', 'class': 'button' },\n    'Write your first entry'\n  )\n);\n\nvar day_Day = function (_Component) {\n  day__inherits(Day, _Component);\n\n  function Day() {\n    var _temp, _this, _ret;\n\n    day__classCallCheck(this, Day);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = day__possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      date: null,\n      questions: null,\n      trackingQuestions: [],\n      highlighted: false,\n      clicked: false,\n      yesterday: null,\n      tomorrow: null,\n      key: ''\n    }, _this.getData = function (props) {\n      return new Promise(function ($return, $error) {\n        var day, month, year, db, set, date, key, keys, questions, trackingQuestions, answers, highlighted, yesterday, tomorrow, setIndex, dataset, goal, closest, trackingAnswers;\n        day = props.day, month = props.month, year = props.year, db = props.db, set = props.set;\n\n        date = new Date(year, Number(month) - 1, day);\n        key = Object(utils_date[\"m\" /* ymd */])(date);\n\n        if (date.toString() === 'Invalid Date') {\n          window.location.href = Object(utils_date[\"l\" /* url */])();\n          return $return();\n        }\n\n        return Promise.resolve(db.keys('questions')).then(function ($await_3) {\n          try {\n            keys = $await_3;\n            return Promise.resolve(Promise.all(keys.map(function (x) {\n              return db.get('questions', x);\n            }))).then(function ($await_4) {\n              try {\n                questions = $await_4;\n                return Promise.resolve(Object(utils_questions[\"b\" /* getTrackingQuestions */])(db)).then(function ($await_5) {\n                  try {\n                    trackingQuestions = $await_5;\n\n                    questions.sort(function (a, b) {\n                      return a.createdAt - b.createdAt;\n                    });\n\n                    return Promise.resolve(Promise.all(questions.map(function (_ref) {\n                      var slug = _ref.slug;\n                      return db.get('entries', key + '_' + slug);\n                    }))).then(function ($await_6) {\n                      try {\n                        answers = $await_6;\n                        questions.forEach(function (question, index) {\n                          question.answer = answers[index] || '';\n                          question.visible = !!answers[index] || question.status === 'live';\n                        });\n\n                        return Promise.resolve(db.get('highlights', key)).then(function ($await_7) {\n                          try {\n                            highlighted = $await_7;\n\n                            yesterday = null;\n                            tomorrow = null;\n                            setIndex = -1;\n                            dataset = [];\n                            if (set === 'highlights') {\n                              return Promise.resolve(db.keys('highlights').then(function (keys) {\n                                return keys.map(function (x) {\n                                  return Number(x);\n                                }).sort(function (a, b) {\n                                  return a - b;\n                                });\n                              })).then(function ($await_8) {\n                                try {\n                                  dataset = $await_8;\n                                  return $If_1.call(this);\n                                } catch ($boundEx) {\n                                  return $error($boundEx);\n                                }\n                              }.bind(this), $error);\n                            } else {\n                              if (set) {\n                                return Promise.resolve(db.getAll('trackingEntries').then(function (entries) {\n                                  return entries.filter(function (x) {\n                                    return x.questionId === set;\n                                  }).filter(utils_questions[\"c\" /* isAnswerValid */]).map(function (x) {\n                                    return x.dateString;\n                                  });\n                                }).then(function (x) {\n                                  return x.map(function (x) {\n                                    return Number(x);\n                                  }).sort(function (a, b) {\n                                    return a - b;\n                                  });\n                                })).then(function ($await_9) {\n                                  try {\n                                    // TODO: Take out defaults? Or remove the instance at day/answer level when the reset back to default\n                                    dataset = $await_9;\n                                    return $If_2.call(this);\n                                  } catch ($boundEx) {\n                                    return $error($boundEx);\n                                  }\n                                }.bind(this), $error);\n                              }\n\n                              function $If_2() {\n                                return $If_1.call(this);\n                              }\n\n                              return $If_2.call(this);\n                            }\n                            function $If_1() {\n                              if (dataset.length) {\n                                goal = Number(key);\n                                closest = dataset.reduce(function (prev, curr) {\n                                  return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n                                });\n\n                                setIndex = dataset.indexOf(closest);\n                              }\n\n                              if (setIndex !== -1) {\n                                tomorrow = dataset[setIndex + 1] || false;\n                                yesterday = dataset[setIndex - 1] || false;\n\n                                if (tomorrow) tomorrow = Object(utils_date[\"i\" /* parseToUrl */])(tomorrow.toString(), set);\n                                if (yesterday) yesterday = Object(utils_date[\"i\" /* parseToUrl */])(yesterday.toString(), set);\n                              }\n\n                              return Promise.resolve(Promise.all(trackingQuestions.map(function (_ref2) {\n                                var id = _ref2.id;\n                                return db.get('trackingEntries', key + '_' + id);\n                              })).then(function (results) {\n                                return results.filter(Boolean);\n                              })).then(function ($await_10) {\n                                try {\n                                  trackingAnswers = $await_10;\n\n                                  trackingQuestions.forEach(function (question) {\n                                    question.answer = trackingAnswers.find(function (x) {\n                                      return x.questionId === question.id;\n                                    });\n                                    question.showNotes = question.answer && !!question.answer.notes;\n                                    question.visible = !!question.answer || question.status === 'live';\n                                  });\n\n                                  _this.setState({\n                                    date: date,\n                                    questions: questions.filter(function (x) {\n                                      return x.visible;\n                                    }),\n                                    trackingQuestions: trackingQuestions.filter(function (x) {\n                                      return x.visible;\n                                    }),\n                                    key: key,\n                                    highlighted: !!highlighted,\n                                    clicked: false,\n                                    yesterday: yesterday,\n                                    tomorrow: tomorrow\n                                  }, function () {\n                                    _this.setTextareaHeights();\n                                  });\n                                  return $return();\n                                } catch ($boundEx) {\n                                  return $error($boundEx);\n                                }\n                              }, $error);\n                            }\n                          } catch ($boundEx) {\n                            return $error($boundEx);\n                          }\n                        }.bind(this), $error);\n                      } catch ($boundEx) {\n                        return $error($boundEx);\n                      }\n                    }.bind(this), $error);\n                  } catch ($boundEx) {\n                    return $error($boundEx);\n                  }\n                }.bind(this), $error);\n              } catch ($boundEx) {\n                return $error($boundEx);\n              }\n            }.bind(this), $error);\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }.bind(this), $error);\n      });\n    }, _this.highlightDay = function () {\n      var highlighted = !_this.state.highlighted;\n      var key = _this.state.key;\n\n\n      if (highlighted) {\n        _this.props.db.set('highlights', key, true);\n      } else {\n        _this.props.db.delete('highlights', key);\n      }\n\n      _this.setState({ highlighted: highlighted, clicked: highlighted });\n    }, _this.updateAnswer = function (slug, answer) {\n      var questions = [].concat(_this.state.questions);\n      var question = questions.find(function (x) {\n        return x.slug === slug;\n      });\n      if (!question) {\n        return;\n      }\n\n      var key = _this.state.key;\n\n      question.answer = answer;\n      _this.props.db.set('entries', key + '_' + slug, answer);\n\n      _this.setState({ questions: questions });\n    }, _this.updateTrackingAnswer = function (questionId, value) {\n      var key = _this.state.key;\n\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === questionId;\n      });\n      if (!question) {\n        return;\n      }\n\n      var id = key + '_' + questionId;\n      var answer = question.answer || {\n        id: id,\n        questionId: questionId,\n        createdAt: Date.now(),\n        dateString: key,\n        value: value,\n        notes: ''\n      };\n\n      if (typeof question.notes === 'string' && !question.showNotes) {\n        question.showNotes = true;\n      }\n\n      question.answer = _extends({}, answer, { value: value });\n      _this.props.db.set('trackingEntries', id, question.answer);\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _this.toggleTrackingOption = function (questionId, value) {\n      var key = _this.state.key;\n\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === questionId;\n      });\n      if (!question) {\n        return;\n      }\n\n      var id = key + '_' + questionId;\n      var val = [];\n\n      var answer = question.answer || {\n        id: id,\n        questionId: questionId,\n        createdAt: Date.now(),\n        dateString: key,\n        value: question.settings.default || [],\n        notes: ''\n      };\n\n      if (question.settings.type === 'checkbox') {\n        var included = answer.value.includes(value);\n        if (included) {\n          val = answer.value.filter(function (x) {\n            return x !== value;\n          });\n        } else {\n          val = [].concat(answer.value, value);\n        }\n      } else {\n        val = [value];\n      }\n\n      question.answer = _extends({}, answer, { value: val });\n      _this.props.db.set('trackingEntries', id, question.answer);\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _this.updateTrackingNotes = function (questionId, notes) {\n      var key = _this.state.key;\n\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === questionId;\n      });\n      if (!question) {\n        return;\n      }\n\n      var id = key + '_' + questionId;\n      var answer = question.answer || {\n        id: id,\n        questionId: questionId,\n        createdAt: Date.now(),\n        dateString: key,\n        value: question.settings.default || null,\n        notes: notes\n      };\n\n      question.answer = _extends({}, answer, { notes: notes });\n      _this.props.db.set('trackingEntries', id, question.answer);\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _this.showNotes = function (questionId) {\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === questionId;\n      });\n      if (!question) {\n        return;\n      }\n\n      question.showNotes = !question.showNotes;\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _temp), day__possibleConstructorReturn(_this, _ret);\n  }\n\n  Day.prototype.componentDidMount = function componentDidMount() {\n    this.getData(this.props);\n  };\n\n  Day.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    this.getData(props);\n  };\n\n  Day.prototype.setTextareaHeights = function setTextareaHeights() {\n    [].forEach.call(document.querySelectorAll('textarea'), function (el) {\n      el.style.height = 'auto';\n      el.style.height = el.scrollHeight + 'px';\n    });\n  };\n\n  /**\n   * TODO: REFACTOR YOU SHOULD BE ASLEEP YOU FOOL\n   */\n\n\n  Day.prototype.render = function render(props, _ref3) {\n    var _this2 = this;\n\n    var date = _ref3.date,\n        questions = _ref3.questions,\n        highlighted = _ref3.highlighted,\n        trackingQuestions = _ref3.trackingQuestions,\n        yesterday = _ref3.yesterday,\n        tomorrow = _ref3.tomorrow;\n\n    if (date === null) {\n      return null;\n    }\n\n    var yesterdayDate = new Date(date);\n    yesterdayDate.setDate(yesterdayDate.getDate() - 1);\n    var yesterdayUrl = yesterday === null ? Object(utils_date[\"l\" /* url */])(yesterdayDate) : yesterday;\n\n    var tomorrowDate = new Date(date);\n    tomorrowDate.setDate(tomorrowDate.getDate() + 1);\n    var tomorrowUrl = tomorrow === null ? Object(utils_date[\"l\" /* url */])(tomorrowDate) : tomorrow;\n\n    return Object(preact_min[\"h\"])(\n      'div',\n      { 'class': 'wrap lift-children' },\n      Object(preact_min[\"h\"])(Traverse[\"a\" /* default */], {\n        title: Object(utils_date[\"c\" /* format */])(date),\n        lastLink: yesterdayUrl,\n        nextLink: tomorrowUrl,\n        actions: Object(preact_min[\"h\"])(\n          'button',\n          {\n            type: 'button',\n            'class': 'button--reset',\n            onClick: this.highlightDay\n          },\n          Object(preact_min[\"h\"])(\n            'svg',\n            {\n              width: '1em',\n              height: '1em',\n              viewBox: '0 0 22 22',\n              xmlns: 'http://www.w3.org/2000/svg'\n            },\n            Object(preact_min[\"h\"])('path', {\n              stroke: highlighted ? 'currentColor' : 'var(--line)',\n              'stroke-width': '2',\n              d: 'M11 1l3 6.3 7 1-5 4.8 1.2 7-6.2-3.3L4.8 20 6 13.1 1 8.3l7-1z',\n              fill: highlighted ? 'currentColor' : 'none',\n              'fill-rule': 'evenodd',\n              'stroke-linecap': 'round',\n              'stroke-linejoin': 'round'\n            })\n          )\n        )\n      }),\n      questions === null ? null : questions.length ? questions.map(function (_ref4) {\n        var slug = _ref4.slug,\n            text = _ref4.text,\n            _ref4$answer = _ref4.answer,\n            answer = _ref4$answer === undefined ? '' : _ref4$answer;\n        return Object(preact_min[\"h\"])(QuestionTextarea_QuestionTextarea, {\n          id: slug,\n          label: text,\n          value: answer,\n          onInput: function onInput(v) {\n            return _this2.updateAnswer(slug, v);\n          }\n        });\n      }) : null,\n      trackingQuestions.map(function (question) {\n        return Object(preact_min[\"h\"])(\n          'div',\n          {\n            key: question.slug,\n            'class': 'tracking-question',\n            'data-question-type': question.settings.type\n          },\n          Object(preact_min[\"h\"])(\n            'header',\n            { 'class': 'tracking-question__header' },\n            Object(preact_min[\"h\"])(\n              'label',\n              { 'for': question.id, dir: 'auto' },\n              question.title\n            ),\n            question.notes === false ? null : Object(preact_min[\"h\"])(\n              'button',\n              {\n                type: 'button',\n                'class': 'button--reset',\n                'aria-label': 'Add notes',\n                onClick: function onClick() {\n                  return _this2.showNotes(question.id);\n                }\n              },\n              Object(preact_min[\"h\"])(\n                'svg',\n                {\n                  width: '20',\n                  height: '20',\n                  xmlns: 'http://www.w3.org/2000/svg'\n                },\n                Object(preact_min[\"h\"])(\n                  'g',\n                  {\n                    'stroke-width': '2',\n                    fill: 'none',\n                    'fill-rule': 'evenodd',\n                    'stroke-linecap': 'round',\n                    'stroke-linejoin': 'round'\n                  },\n                  Object(preact_min[\"h\"])('path', {\n                    d: 'M19 13a2 2 0 01-2 2H5l-4 4V3c0-1.1.9-2 2-2h14a2 2 0 012 2v10z',\n                    fill: question.showNotes ? '#B9BCC6' : null,\n                    stroke: '#B9BCC6'\n                  }),\n                  Object(preact_min[\"h\"])('path', {\n                    stroke: question.showNotes ? '#FFF' : '#B9BCC6',\n                    d: 'M9.8 5v6.5M6.5 8.5H13'\n                  })\n                )\n              )\n            )\n          ),\n          question.settings.type === 'checkbox' || question.settings.type === 'radio' ? Object(preact_min[\"h\"])(CheckboxPicker_CheckboxPicker, {\n            id: question.id,\n            type: question.settings.type,\n            value: question.answer ? question.answer.value : question.settings.default,\n            options: question.settings.options,\n            onChange: function onChange(v) {\n              return _this2.toggleTrackingOption(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'lightswitch' ? Object(preact_min[\"h\"])(Index_TogglePicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value : question.settings.default,\n            onChange: function onChange(v) {\n              return _this2.updateTrackingAnswer(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'select' ? Object(preact_min[\"h\"])(SelectPicker_SelectPicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value[0] || question.settings.default : question.settings.default,\n            options: question.settings.options,\n            onChange: function onChange(v) {\n              return _this2.toggleTrackingOption(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'star' ? Object(preact_min[\"h\"])(StarPicker_StarPicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value : question.settings.default || null,\n            onChange: function onChange(v) {\n              return _this2.updateTrackingAnswer(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'number' ? Object(preact_min[\"h\"])(NumberPicker_NumberPicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value : question.settings.default || null,\n            settings: question.settings,\n            onChange: function onChange(v) {\n              return _this2.updateTrackingAnswer(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'plus' ? Object(preact_min[\"h\"])(PlusPicker_PlusPicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value : question.settings.default || null,\n            settings: question.settings,\n            onChange: function onChange(v) {\n              return _this2.updateTrackingAnswer(question.id, v);\n            }\n          }) : null,\n          question.settings.type === 'range' ? Object(preact_min[\"h\"])(RangePicker_RangePicker, {\n            id: question.id,\n            value: question.answer ? question.answer.value : question.settings.default || null,\n            settings: question.settings,\n            onChange: function onChange(v) {\n              return _this2.updateTrackingAnswer(question.id, v);\n            }\n          }) : null,\n          question.showNotes && Object(preact_min[\"h\"])(QuestionTextarea_QuestionTextarea, {\n            id: question.id + '_notes',\n            label: question.notes === true ? 'Additional notes' : question.notes,\n            value: question.answer ? question.answer.notes || '' : '',\n            onInput: function onInput(v) {\n              return _this2.updateTrackingNotes(question.id, v);\n            }\n          })\n        );\n      }),\n      !questions.length && !trackingQuestions.length ? _ref5 : null\n    );\n  };\n\n  return Day;\n}(preact_min[\"Component\"]);\n\n/* harmony default export */ var lib__ref__0_routes_day = __webpack_exports__[\"default\"] = (Object(preact[\"connect\"])('db')(day_Day));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-day.chunk.9ceef.js","import { h } from 'preact';\n\nconst QuestionTextarea = ({ onInput, id, value, label }) => (\n  <div key={id} class=\"question\">\n    <label for={id} dir=\"auto\">\n      {label}\n    </label>\n    <textarea\n      id={id}\n      dir=\"auto\"\n      value={value}\n      placeholder=\"Start writing...\"\n      onInput={event => {\n        event.target.style.height = 'auto';\n        event.target.getBoundingClientRect();\n        event.target.style.height = event.target.scrollHeight + 'px';\n        onInput(event.target.value);\n      }}\n    />\n  </div>\n);\n\nexport { QuestionTextarea };\n\n\n\n// WEBPACK FOOTER //\n// ./components/QuestionTextarea/index.js","import { h } from 'preact';\n\nconst StarPicker = ({ id, value, onChange }) => (\n  <div class=\"stars\">\n    {[1, 2, 3, 4, 5].map(v => (\n      <div>\n        <input\n          type=\"checkbox\"\n          value={v}\n          id={`${id}_star_${v}`}\n          class=\"screen-reader-only\"\n          checked={value && v <= value}\n          onChange={() => onChange(v)}\n        />\n        <label for={`${id}_star_${v}`} aria-label={`${v} stars`}>\n          <svg width=\"28\" height=\"27\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M18 9.2l9 1.4-6.5 6.4 1.5 9-8-4.3L6 26l1.5-9L1 10.6l9-1.4L14 1z\"\n              fill=\"currentColor\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n              fill-rule=\"evenodd\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        </label>\n      </div>\n    ))}\n  </div>\n);\n\nexport { StarPicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/StarPicker/index.js","import { h } from 'preact';\n\nconst NumberPicker = ({ id, value, settings = {}, onChange }) => (\n  <div>\n    <input\n      type=\"number\"\n      id={id}\n      value={value !== undefined ? value : settings.default}\n      min={settings.min}\n      max={settings.max}\n      step={settings.step}\n      autocomplete=\"number-picker\"\n      onInput={event => {\n        onChange(\n          event.target.value === ''\n            ? settings.default\n            : Number(event.target.value)\n        );\n      }}\n    />\n  </div>\n);\n\nexport { NumberPicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/NumberPicker/index.js","import { h } from 'preact';\n\nconst SelectPicker = ({ id, value, options = [], onChange }) => (\n  <select id={id} value={value} onChange={e => onChange(e.target.value)}>\n    {options.map(option => (\n      <option key={option} value={option}>\n        {option}\n      </option>\n    ))}\n  </select>\n);\n\nexport { SelectPicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/SelectPicker/index.js","import { h } from 'preact';\n\nconst CheckboxPicker = ({\n  id,\n  type = 'checkbox',\n  value,\n  options = [],\n  onChange,\n}) => (\n  <div>\n    {options.map(option => (\n      <div class=\"c-checkbox\" key={option}>\n        <input\n          id={`${id}_${option}`}\n          class=\"screen-reader-only\"\n          type={type}\n          checked={value.includes(option)}\n          onChange={() => onChange(option)}\n        />\n        <label for={`${id}_${option}`}>{option}</label>\n      </div>\n    ))}\n  </div>\n);\n\nexport { CheckboxPicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/CheckboxPicker/index.js","import { h } from 'preact';\n\nconst TogglePicker = ({ id, value, onChange }) => {\n  const checked = value.includes(true);\n  return (\n    <div class=\"c-checkbox\">\n      <input\n        id={id}\n        type=\"checkbox\"\n        class=\"screen-reader-only\"\n        checked={checked}\n        onChange={() => onChange([!checked].filter(Boolean))}\n      />\n      <label for={id}>{''}</label>\n    </div>\n  );\n};\n\nexport { TogglePicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/TogglePicker/Index.js","import { h } from 'preact';\n\nconst RangePicker = ({ id, value, settings = {}, onChange }) => {\n  const hasValue = value !== null && value !== undefined;\n  const val = hasValue ? value : settings.default;\n\n  return (\n    <div class=\"u-flex\">\n      <div class=\"u-flex-1 mr20\">\n        <input\n          type=\"range\"\n          id={id}\n          value={val}\n          min={settings.min}\n          max={settings.max}\n          step={settings.step}\n          onInput={event => {\n            onChange(\n              event.target.value === ''\n                ? settings.default\n                : Number(event.target.value)\n            );\n          }}\n        />\n      </div>\n      <small class=\"range-label\">{hasValue ? val : 'Not yet set'}</small>\n    </div>\n  );\n};\n\nexport { RangePicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/RangePicker/index.js","import { h, Component } from 'preact';\n\nclass PlusPicker extends Component {\n  addStep() {\n    const { max = null, step = 1 } = this.props.settings;\n    const value = Number(this.props.value);\n    let val = value + step;\n\n    if (max !== null) {\n      val = Math.min(val, max);\n    }\n\n    this.props.onChange(val);\n  }\n\n  removeStep() {\n    const { min = null, step = 1 } = this.props.settings;\n    const value = Number(this.props.value);\n    let val = value - step;\n\n    if (min !== null) {\n      val = Math.max(val, min);\n    }\n\n    this.props.onChange(val);\n  }\n\n  render({ id, value, settings = {}, onChange }) {\n    return (\n      <div class=\"plus-picker u-flex\">\n        <input\n          class=\"c-input-mini\"\n          type=\"number\"\n          id={id}\n          value={value !== undefined ? value : settings.default}\n          min={settings.min}\n          max={settings.max}\n          step={settings.step}\n          autocomplete=\"plus-picker\"\n          onInput={event => {\n            onChange(\n              event.target.value === ''\n                ? settings.default\n                : Number(event.target.value)\n            );\n          }}\n        />\n        <button\n          class=\"button button--mini\"\n          type=\"button\"\n          aria-label=\"Remove\"\n          onClick={() => this.removeStep()}\n        >\n          -\n        </button>\n        <button\n          class=\"button button--mini\"\n          type=\"button\"\n          aria-label=\"Add\"\n          onClick={() => this.addStep()}\n        >\n          +\n        </button>\n      </div>\n    );\n  }\n}\n\nexport { PlusPicker };\n\n\n\n// WEBPACK FOOTER //\n// ./components/PlusPicker/PlusPicker.js","import { h, Component } from 'preact';\nimport { Link } from 'preact-router/match';\nimport { ymd, url, format, parseToUrl } from '../../utils/date';\nimport { getTrackingQuestions, isAnswerValid } from '../../utils/questions';\nimport Traverse from '../../components/Traverse';\nimport { connect } from 'unistore/preact';\nimport { QuestionTextarea } from '../../components/QuestionTextarea';\nimport { StarPicker } from '../../components/StarPicker';\nimport { NumberPicker } from '../../components/NumberPicker';\nimport { SelectPicker } from '../../components/SelectPicker';\nimport { CheckboxPicker } from '../../components/CheckboxPicker';\nimport { TogglePicker } from '../../components/TogglePicker/Index';\nimport { RangePicker } from '../../components/RangePicker';\nimport { PlusPicker } from '../../components/PlusPicker/PlusPicker';\n\nclass Day extends Component {\n  state = {\n    date: null,\n    questions: null,\n    trackingQuestions: [],\n    highlighted: false,\n    clicked: false,\n    yesterday: null,\n    tomorrow: null,\n    key: '',\n  };\n\n  componentDidMount() {\n    this.getData(this.props);\n  }\n\n  componentWillReceiveProps(props) {\n    this.getData(props);\n  }\n\n  getData = async props => {\n    const { day, month, year, db, set } = props;\n    const date = new Date(year, Number(month) - 1, day);\n    const key = ymd(date);\n\n    if (date.toString() === 'Invalid Date') {\n      window.location.href = url();\n      return;\n    }\n\n    const keys = await db.keys('questions');\n    const questions = await Promise.all(keys.map(x => db.get('questions', x)));\n    const trackingQuestions = await getTrackingQuestions(db);\n\n    questions.sort((a, b) => a.createdAt - b.createdAt);\n\n    const answers = await Promise.all(\n      questions.map(({ slug }) => db.get('entries', `${key}_${slug}`))\n    );\n    questions.forEach((question, index) => {\n      question.answer = answers[index] || '';\n      question.visible = !!answers[index] || question.status === 'live';\n    });\n\n    const highlighted = await db.get('highlights', key);\n\n    let yesterday = null;\n    let tomorrow = null;\n    let setIndex = -1;\n    let dataset = [];\n    if (set === 'highlights') {\n      dataset = await db.keys('highlights').then(keys => {\n        return keys.map(x => Number(x)).sort((a, b) => a - b);\n      });\n    } else if (set) {\n      // TODO: Take out defaults? Or remove the instance at day/answer level when the reset back to default\n      dataset = await db\n        .getAll('trackingEntries')\n        .then(entries => {\n          return entries\n            .filter(x => x.questionId === set)\n            .filter(isAnswerValid)\n            .map(x => x.dateString);\n        })\n        .then(x => x.map(x => Number(x)).sort((a, b) => a - b));\n    }\n\n    if (dataset.length) {\n      const goal = Number(key);\n      const closest = dataset.reduce((prev, curr) => {\n        return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n      });\n\n      setIndex = dataset.indexOf(closest);\n    }\n\n    if (setIndex !== -1) {\n      tomorrow = dataset[setIndex + 1] || false;\n      yesterday = dataset[setIndex - 1] || false;\n\n      if (tomorrow) tomorrow = parseToUrl(tomorrow.toString(), set);\n      if (yesterday) yesterday = parseToUrl(yesterday.toString(), set);\n    }\n\n    const trackingAnswers = await Promise.all(\n      trackingQuestions.map(({ id }) =>\n        db.get('trackingEntries', `${key}_${id}`)\n      )\n    ).then(results => results.filter(Boolean));\n\n    trackingQuestions.forEach(question => {\n      question.answer = trackingAnswers.find(x => x.questionId === question.id);\n      question.showNotes = question.answer && !!question.answer.notes;\n      question.visible = !!question.answer || question.status === 'live';\n    });\n\n    this.setState(\n      {\n        date,\n        questions: questions.filter(x => x.visible),\n        trackingQuestions: trackingQuestions.filter(x => x.visible),\n        key,\n        highlighted: !!highlighted,\n        clicked: false,\n        yesterday,\n        tomorrow,\n      },\n      () => {\n        this.setTextareaHeights();\n      }\n    );\n  };\n\n  setTextareaHeights() {\n    [].forEach.call(document.querySelectorAll('textarea'), el => {\n      el.style.height = 'auto';\n      el.style.height = el.scrollHeight + 'px';\n    });\n  }\n\n  highlightDay = () => {\n    const highlighted = !this.state.highlighted;\n    const { key } = this.state;\n\n    if (highlighted) {\n      this.props.db.set('highlights', key, true);\n    } else {\n      this.props.db.delete('highlights', key);\n    }\n\n    this.setState({ highlighted, clicked: highlighted });\n  };\n\n  updateAnswer = (slug, answer) => {\n    const questions = [...this.state.questions];\n    const question = questions.find(x => x.slug === slug);\n    if (!question) {\n      return;\n    }\n\n    const { key } = this.state;\n    question.answer = answer;\n    this.props.db.set('entries', `${key}_${slug}`, answer);\n\n    this.setState({ questions });\n  };\n\n  updateTrackingAnswer = (questionId, value) => {\n    const { key } = this.state;\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === questionId);\n    if (!question) {\n      return;\n    }\n\n    const id = `${key}_${questionId}`;\n    const answer = question.answer || {\n      id,\n      questionId,\n      createdAt: Date.now(),\n      dateString: key,\n      value,\n      notes: '',\n    };\n\n    if (typeof question.notes === 'string' && !question.showNotes) {\n      question.showNotes = true;\n    }\n\n    question.answer = { ...answer, value };\n    this.props.db.set('trackingEntries', id, question.answer);\n\n    this.setState({ trackingQuestions });\n  };\n\n  /**\n   * TODO: REFACTOR YOU SHOULD BE ASLEEP YOU FOOL\n   */\n  toggleTrackingOption = (questionId, value) => {\n    const { key } = this.state;\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === questionId);\n    if (!question) {\n      return;\n    }\n\n    const id = `${key}_${questionId}`;\n    let val = [];\n\n    const answer = question.answer || {\n      id,\n      questionId,\n      createdAt: Date.now(),\n      dateString: key,\n      value: question.settings.default || [],\n      notes: '',\n    };\n\n    if (question.settings.type === 'checkbox') {\n      const included = answer.value.includes(value);\n      if (included) {\n        val = answer.value.filter(x => x !== value);\n      } else {\n        val = [...answer.value, ...value];\n      }\n    } else {\n      val = [value];\n    }\n\n    question.answer = { ...answer, value: val };\n    this.props.db.set('trackingEntries', id, question.answer);\n\n    this.setState({ trackingQuestions });\n  };\n\n  updateTrackingNotes = (questionId, notes) => {\n    const { key } = this.state;\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === questionId);\n    if (!question) {\n      return;\n    }\n\n    const id = `${key}_${questionId}`;\n    const answer = question.answer || {\n      id,\n      questionId,\n      createdAt: Date.now(),\n      dateString: key,\n      value: question.settings.default || null,\n      notes,\n    };\n\n    question.answer = { ...answer, notes };\n    this.props.db.set('trackingEntries', id, question.answer);\n\n    this.setState({ trackingQuestions });\n  };\n\n  showNotes = questionId => {\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === questionId);\n    if (!question) {\n      return;\n    }\n\n    question.showNotes = !question.showNotes;\n\n    this.setState({ trackingQuestions });\n  };\n\n  render(\n    props,\n    { date, questions, highlighted, trackingQuestions, yesterday, tomorrow }\n  ) {\n    if (date === null) {\n      return null;\n    }\n\n    const yesterdayDate = new Date(date);\n    yesterdayDate.setDate(yesterdayDate.getDate() - 1);\n    const yesterdayUrl = yesterday === null ? url(yesterdayDate) : yesterday;\n\n    const tomorrowDate = new Date(date);\n    tomorrowDate.setDate(tomorrowDate.getDate() + 1);\n    const tomorrowUrl = tomorrow === null ? url(tomorrowDate) : tomorrow;\n\n    return (\n      <div class=\"wrap lift-children\">\n        <Traverse\n          title={format(date)}\n          lastLink={yesterdayUrl}\n          nextLink={tomorrowUrl}\n          actions={\n            <button\n              type=\"button\"\n              class=\"button--reset\"\n              onClick={this.highlightDay}\n            >\n              <svg\n                width=\"1em\"\n                height=\"1em\"\n                viewBox=\"0 0 22 22\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  stroke={highlighted ? 'currentColor' : 'var(--line)'}\n                  stroke-width=\"2\"\n                  d=\"M11 1l3 6.3 7 1-5 4.8 1.2 7-6.2-3.3L4.8 20 6 13.1 1 8.3l7-1z\"\n                  fill={highlighted ? 'currentColor' : 'none'}\n                  fill-rule=\"evenodd\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </button>\n          }\n        />\n\n        {questions === null\n          ? null\n          : questions.length\n          ? questions.map(({ slug, text, answer = '' }) => (\n              <QuestionTextarea\n                id={slug}\n                label={text}\n                value={answer}\n                onInput={v => this.updateAnswer(slug, v)}\n              />\n            ))\n          : null}\n\n        {trackingQuestions.map(question => (\n          <div\n            key={question.slug}\n            class=\"tracking-question\"\n            data-question-type={question.settings.type}\n          >\n            <header class=\"tracking-question__header\">\n              <label for={question.id} dir=\"auto\">\n                {question.title}\n              </label>\n              {question.notes === false ? null : (\n                <button\n                  type=\"button\"\n                  class=\"button--reset\"\n                  aria-label=\"Add notes\"\n                  onClick={() => this.showNotes(question.id)}\n                >\n                  <svg\n                    width=\"20\"\n                    height=\"20\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <g\n                      stroke-width=\"2\"\n                      fill=\"none\"\n                      fill-rule=\"evenodd\"\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                    >\n                      <path\n                        d=\"M19 13a2 2 0 01-2 2H5l-4 4V3c0-1.1.9-2 2-2h14a2 2 0 012 2v10z\"\n                        fill={question.showNotes ? '#B9BCC6' : null}\n                        stroke=\"#B9BCC6\"\n                      />\n                      <path\n                        stroke={question.showNotes ? '#FFF' : '#B9BCC6'}\n                        d=\"M9.8 5v6.5M6.5 8.5H13\"\n                      />\n                    </g>\n                  </svg>\n                </button>\n              )}\n            </header>\n\n            {question.settings.type === 'checkbox' ||\n            question.settings.type === 'radio' ? (\n              <CheckboxPicker\n                id={question.id}\n                type={question.settings.type}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default\n                }\n                options={question.settings.options}\n                onChange={v => this.toggleTrackingOption(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'lightswitch' ? (\n              <TogglePicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default\n                }\n                onChange={v => this.updateTrackingAnswer(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'select' ? (\n              <SelectPicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value[0] || question.settings.default\n                    : question.settings.default\n                }\n                options={question.settings.options}\n                onChange={v => this.toggleTrackingOption(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'star' ? (\n              <StarPicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default || null\n                }\n                onChange={v => this.updateTrackingAnswer(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'number' ? (\n              <NumberPicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default || null\n                }\n                settings={question.settings}\n                onChange={v => this.updateTrackingAnswer(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'plus' ? (\n              <PlusPicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default || null\n                }\n                settings={question.settings}\n                onChange={v => this.updateTrackingAnswer(question.id, v)}\n              />\n            ) : null}\n\n            {question.settings.type === 'range' ? (\n              <RangePicker\n                id={question.id}\n                value={\n                  question.answer\n                    ? question.answer.value\n                    : question.settings.default || null\n                }\n                settings={question.settings}\n                onChange={v => this.updateTrackingAnswer(question.id, v)}\n              />\n            ) : null}\n\n            {question.showNotes && (\n              <QuestionTextarea\n                id={`${question.id}_notes`}\n                label={\n                  question.notes === true ? 'Additional notes' : question.notes\n                }\n                value={question.answer ? question.answer.notes || '' : ''}\n                onInput={v => this.updateTrackingNotes(question.id, v)}\n              />\n            )}\n          </div>\n        ))}\n\n        {!questions.length && !trackingQuestions.length ? (\n          <div class=\"center lift mt40\">\n            <Link href=\"/get-started/\" class=\"button\">\n              Write your first entry\n            </Link>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default connect('db')(Day);\n\n\n\n// WEBPACK FOOTER //\n// ./routes/day/index.js"],"sourceRoot":""}