{"version":3,"sources":["webpack:///route-add-statistic.chunk.4c915.js","webpack:///./components/TrackingQuestionList/index.js","webpack:///./utils/pluralise.js","webpack:///./routes/add-statistic/index.js"],"names":["webpackJsonp","7grX","module","__webpack_exports__","__webpack_require__","d","TrackingQuestionList","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__Toggle__","n","_ref2","value","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","trackingQuestions","updateTrackingQuestion","updateTrackingOption","hideActive","map","question","class","for","id","type","dir","title","onInput","e","target","label","on","status","onToggle","checked","notes","onChange","placeholder","settings","options","option","i","key","aria-label","onClick","length","calculation","JiZg","pluralise","string","count","alt","l4nm","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_1__utils_slugify__","__WEBPACK_IMPORTED_MODULE_2__utils_pluralise__","__WEBPACK_IMPORTED_MODULE_3__components_Traverse__","__WEBPACK_IMPORTED_MODULE_4__store_actions__","__WEBPACK_IMPORTED_MODULE_5_unistore_preact__","__WEBPACK_IMPORTED_MODULE_6__components_TrackingQuestionList__","__WEBPACK_IMPORTED_MODULE_7__utils_questions__","className","AddStatistic","_temp","_this","_ret","_len","arguments","args","Array","_key","this","_Component","apply","concat","state","preset","onSubmit","preventDefault","forEach","props","db","set","localStorage","setItem","window","location","href","attribute","find","x","setState","index","remove","splice","createPreset","presets","getPresetQuestions","groupId","slugify","createdAt","render","buttons","disabled","Component","connect","actions"],"mappings":"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","file":"route-add-statistic.chunk.4c915.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"7grX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TrackingQuestionList; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Toggle__ = __webpack_require__(\"2+yi\");\n\n\n\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'number' },\n  'Number'\n);\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'plus' },\n  'Number with +/-'\n);\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'star' },\n  'Star rating'\n);\n\nvar _ref5 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'range' },\n  'Range slider'\n);\n\nvar _ref6 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'select' },\n  'Dropdown'\n);\n\nvar _ref7 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'checkbox' },\n  'Checkboxes'\n);\n\nvar _ref8 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'lightswitch' },\n  'Yes/No switch'\n);\n\nvar _ref9 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'label',\n  null,\n  'Options:'\n);\n\nvar _ref10 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: '' },\n  'Select a calculation'\n);\n\nvar _ref11 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'total' },\n  'Total/Sum'\n);\n\nvar _ref12 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'average' },\n  'Average'\n);\n\nvar _ref13 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'option',\n  { value: 'count' },\n  'Count'\n);\n\nvar TrackingQuestionList = function TrackingQuestionList(_ref) {\n  var trackingQuestions = _ref.trackingQuestions,\n      updateTrackingQuestion = _ref.updateTrackingQuestion,\n      updateTrackingOption = _ref.updateTrackingOption,\n      hideActive = _ref.hideActive;\n  return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n    'div',\n    null,\n    trackingQuestions.map(function (question) {\n      return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'div',\n        { 'class': 'edit-tracking-question' },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          { 'class': 'edit-question' },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'label',\n            { 'for': question.id + '_title' },\n            'Question, title:'\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n            id: question.id + '_title',\n            type: 'text',\n            dir: 'auto',\n            value: question.title,\n            onInput: function onInput(e) {\n              return updateTrackingQuestion(question.id, e.target.value, 'title');\n            }\n          }),\n          !hideActive && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_1__Toggle__[\"a\" /* Toggle */], {\n            label: 'Active',\n            on: question.status === 'live',\n            onToggle: function onToggle() {\n              return updateTrackingQuestion(question.id, question.status === 'live' ? 'draft' : 'live', 'status');\n            }\n          })\n        ),\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'div',\n            { 'class': 'c-checkbox' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n              id: question.id + '_showNotes',\n              type: 'checkbox',\n              checked: !!question.notes,\n              onChange: function onChange() {\n                updateTrackingQuestion(question.id, !question.notes, 'notes');\n              }\n            }),\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'label',\n              { 'for': question.id + '_showNotes' },\n              'Allow additional notes?'\n            )\n          )\n        ),\n        question.notes && Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'label',\n            { 'for': question.id + '_notes' },\n            'Custom notes label:'\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n            id: question.id + '_notes',\n            type: 'text',\n            dir: 'auto',\n            value: question.notes === true ? '' : question.notes,\n            placeholder: 'e.g. What happenend?',\n            onInput: function onInput(e) {\n              updateTrackingQuestion(question.id, e.target.value || true, 'notes');\n            }\n          })\n        ),\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'label',\n            { 'for': question.id + '_type' },\n            'Type:'\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'select',\n            {\n              id: question.id + '_type',\n              value: question.settings.type,\n              onInput: function onInput(e) {\n                updateTrackingQuestion(question.id, e.target.value, 'type', true);\n              }\n            },\n            question.type === 'number' && _ref2,\n            question.type === 'number' && _ref3,\n            question.type === 'number' && _ref4,\n            question.type === 'number' && _ref5,\n            question.type === 'options' && _ref6,\n            question.type === 'options' && _ref7,\n            question.type === 'options' && _ref8\n          )\n        ),\n        question.type === 'options' && question.settings.type !== 'lightswitch' ? Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          _ref9,\n          question.settings.options.map(function (option, i) {\n            return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'div',\n              { 'class': 'mb10 u-flex', key: i },\n              Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n                'class': 'c-input-mini',\n                type: 'text',\n                dir: 'auto',\n                value: option,\n                onInput: function onInput(e) {\n                  return updateTrackingOption(question.id, e.target.value, i);\n                }\n              }),\n              Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n                'button',\n                {\n                  type: 'button',\n                  'aria-label': 'Remove option',\n                  'class': 'button--reset px10',\n                  onClick: function onClick() {\n                    updateTrackingOption(question.id, '', i, true);\n                  }\n                },\n                '\\xD7'\n              )\n            );\n          }),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'button',\n            {\n              type: 'button',\n              'class': 'right button--reset',\n              onClick: function onClick() {\n                updateTrackingOption(question.id, '', question.settings.options.length);\n              }\n            },\n            'Add ',\n            question.settings.options.length ? 'another' : 'an',\n            ' option'\n          )\n        ) : null,\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'p',\n          null,\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'label',\n            { 'for': question.id + '_calculation' },\n            'Statistic calculation:'\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'select',\n            {\n              id: question.id + '_calculation',\n              value: question.settings.calculation,\n              onInput: function onInput(e) {\n                updateTrackingQuestion(question.id, e.target.value, 'calculation', true);\n              }\n            },\n            _ref10,\n            question.type === 'number' && _ref11,\n            question.type === 'number' && _ref12,\n            question.type === 'options' && _ref13\n          )\n        )\n      );\n    })\n  );\n};\n\n\n\n/***/ }),\n\n/***/ \"JiZg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pluralise; });\nvar pluralise = function pluralise(string) {\n  var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var alt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  return count !== 1 ? alt || string + 's' : string;\n};\n\n/***/ }),\n\n/***/ \"l4nm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_slugify__ = __webpack_require__(\"KGMw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_pluralise__ = __webpack_require__(\"JiZg\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Traverse__ = __webpack_require__(\"db16\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__store_actions__ = __webpack_require__(\"QlVn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_unistore_preact__ = __webpack_require__(\"o6ac\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_unistore_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_unistore_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_TrackingQuestionList__ = __webpack_require__(\"7grX\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__utils_questions__ = __webpack_require__(\"b1q8\");\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_3__components_Traverse__[\"a\" /* default */], {\n  title: 'Add a personal statistic to track',\n  className: 'traverse--center mb20'\n});\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'p',\n  null,\n  'Choose a preset, or create a custom statistic:'\n);\n\nvar AddStatistic = function (_Component) {\n  _inherits(AddStatistic, _Component);\n\n  function AddStatistic() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AddStatistic);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      trackingQuestions: [],\n      preset: ''\n    }, _this.onSubmit = function (e) {\n      e.preventDefault();\n\n      _this.state.trackingQuestions.forEach(function (question) {\n        _this.props.db.set('trackingQuestions', question.id, question);\n      });\n\n      localStorage.setItem('MindPalace_onboarded', true);\n\n      window.location.href = '/settings/';\n    }, _this.updateTrackingQuestion = function (id, value) {\n      var attribute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'text';\n      var settings = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === id;\n      });\n\n      if (!question) {\n        return;\n      }\n\n      if (settings) {\n        question.settings[attribute] = value;\n      } else {\n        question[attribute] = value;\n      }\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _this.updateTrackingOption = function (id, value, index) {\n      var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var trackingQuestions = [].concat(_this.state.trackingQuestions);\n      var question = trackingQuestions.find(function (x) {\n        return x.id === id;\n      });\n\n      if (!question) {\n        return;\n      }\n\n      if (remove) {\n        question.settings.options.splice(index, 1);\n      } else {\n        question.settings.options[index] = value;\n      }\n\n      _this.setState({ trackingQuestions: trackingQuestions });\n    }, _this.createPreset = function (preset) {\n      var trackingQuestions = [];\n      var presets = Object(__WEBPACK_IMPORTED_MODULE_7__utils_questions__[\"a\" /* getPresetQuestions */])();\n\n      if (presets[preset]) {\n        trackingQuestions = [].concat(presets[preset]);\n        var groupId = Object(__WEBPACK_IMPORTED_MODULE_1__utils_slugify__[\"a\" /* slugify */])();\n        trackingQuestions.forEach(function (question, index) {\n          question.id = Object(__WEBPACK_IMPORTED_MODULE_1__utils_slugify__[\"a\" /* slugify */])();\n          question.groupId = groupId;\n          question.createdAt += index;\n        });\n      }\n\n      _this.setState({ preset: preset, trackingQuestions: trackingQuestions });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  AddStatistic.prototype.render = function render(props, _ref) {\n    var _this2 = this;\n\n    var trackingQuestions = _ref.trackingQuestions,\n        preset = _ref.preset;\n\n    var buttons = [['Sleep tracking', 'sleep'], ['Medicine log', 'medicine'], ['Panic attack', 'panic'], ['Musical instrument', 'musical'], ['Running', 'running'], ['Asthma log', 'asthma'], ['Mood', 'mood'], ['Discomfort', 'discomfort'], ['Workout', 'workout'], ['Custom numerical', 'number'], ['Custom choices', 'choices'], ['Yes/No switch', 'tickbox']];\n\n    return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'div',\n      { 'class': 'wrap' },\n      _ref2,\n      _ref3,\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'div',\n        { 'class': 'year-overview year-overview--center' },\n        buttons.map(function (_ref4) {\n          var label = _ref4[0],\n              value = _ref4[1];\n          return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'button',\n            {\n              type: 'button',\n              'class': 'button button--grey',\n              disabled: preset && preset !== value,\n              onClick: function onClick() {\n                return _this2.createPreset(value);\n              }\n            },\n            label\n          );\n        })\n      ),\n      preset ? Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'form',\n        { onSubmit: function onSubmit(e) {\n            return _this2.onSubmit(e);\n          } },\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(__WEBPACK_IMPORTED_MODULE_6__components_TrackingQuestionList__[\"a\" /* TrackingQuestionList */], {\n          trackingQuestions: trackingQuestions,\n          updateTrackingQuestion: this.updateTrackingQuestion,\n          updateTrackingOption: this.updateTrackingOption,\n          hideActive: true\n        }),\n        trackingQuestions.length ? Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', {\n          type: 'submit',\n          'class': 'button mr20',\n          value: Object(__WEBPACK_IMPORTED_MODULE_2__utils_pluralise__[\"a\" /* pluralise */])('Add', trackingQuestions.length)\n        }) : null,\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'button',\n          {\n            type: 'button',\n            'class': 'button--reset',\n            onClick: function onClick() {\n              return _this2.createPreset('');\n            }\n          },\n          'Reset'\n        )\n      ) : null\n    );\n  };\n\n  return AddStatistic;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_5_unistore_preact__[\"connect\"])('settings, db', __WEBPACK_IMPORTED_MODULE_4__store_actions__[\"a\" /* actions */])(AddStatistic));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-add-statistic.chunk.4c915.js","import { h } from 'preact';\nimport { Toggle } from '../Toggle';\n\nconst TrackingQuestionList = ({\n  trackingQuestions,\n  updateTrackingQuestion,\n  updateTrackingOption,\n  hideActive,\n}) => (\n  <div>\n    {trackingQuestions.map(question => (\n      <div class=\"edit-tracking-question\">\n        <p class=\"edit-question\">\n          <label for={`${question.id}_title`}>Question, title:</label>\n          <input\n            id={`${question.id}_title`}\n            type=\"text\"\n            dir=\"auto\"\n            value={question.title}\n            onInput={e =>\n              updateTrackingQuestion(question.id, e.target.value, 'title')\n            }\n          />\n          {!hideActive && (\n            <Toggle\n              label=\"Active\"\n              on={question.status === 'live'}\n              onToggle={() =>\n                updateTrackingQuestion(\n                  question.id,\n                  question.status === 'live' ? 'draft' : 'live',\n                  'status'\n                )\n              }\n            />\n          )}\n        </p>\n        <p>\n          <div class=\"c-checkbox\">\n            <input\n              id={`${question.id}_showNotes`}\n              type=\"checkbox\"\n              checked={!!question.notes}\n              onChange={() => {\n                updateTrackingQuestion(question.id, !question.notes, 'notes');\n              }}\n            />\n            <label for={`${question.id}_showNotes`}>\n              Allow additional notes?\n            </label>\n          </div>\n        </p>\n        {question.notes && (\n          <p>\n            <label for={`${question.id}_notes`}>Custom notes label:</label>\n            <input\n              id={`${question.id}_notes`}\n              type=\"text\"\n              dir=\"auto\"\n              value={question.notes === true ? '' : question.notes}\n              placeholder=\"e.g. What happenend?\"\n              onInput={e => {\n                updateTrackingQuestion(\n                  question.id,\n                  e.target.value || true,\n                  'notes'\n                );\n              }}\n            />\n          </p>\n        )}\n\n        <p>\n          <label for={`${question.id}_type`}>Type:</label>\n          <select\n            id={`${question.id}_type`}\n            value={question.settings.type}\n            onInput={e => {\n              updateTrackingQuestion(question.id, e.target.value, 'type', true);\n            }}\n          >\n            {question.type === 'number' && (\n              <option value=\"number\">Number</option>\n            )}\n            {question.type === 'number' && (\n              <option value=\"plus\">Number with +/-</option>\n            )}\n            {question.type === 'number' && (\n              <option value=\"star\">Star rating</option>\n            )}\n            {question.type === 'number' && (\n              <option value=\"range\">Range slider</option>\n            )}\n            {question.type === 'options' && (\n              <option value=\"select\">Dropdown</option>\n            )}\n            {question.type === 'options' && (\n              <option value=\"checkbox\">Checkboxes</option>\n            )}\n            {question.type === 'options' && (\n              <option value=\"lightswitch\">Yes/No switch</option>\n            )}\n          </select>\n        </p>\n\n        {question.type === 'options' &&\n        question.settings.type !== 'lightswitch' ? (\n          <p>\n            <label>Options:</label>\n            {question.settings.options.map((option, i) => {\n              return (\n                <div class=\"mb10 u-flex\" key={i}>\n                  <input\n                    class=\"c-input-mini\"\n                    type=\"text\"\n                    dir=\"auto\"\n                    value={option}\n                    onInput={e =>\n                      updateTrackingOption(question.id, e.target.value, i)\n                    }\n                  />\n                  <button\n                    type=\"button\"\n                    aria-label=\"Remove option\"\n                    class=\"button--reset px10\"\n                    onClick={() => {\n                      updateTrackingOption(question.id, '', i, true);\n                    }}\n                  >\n                    &times;\n                  </button>\n                </div>\n              );\n            })}\n            <button\n              type=\"button\"\n              class=\"right button--reset\"\n              onClick={() => {\n                updateTrackingOption(\n                  question.id,\n                  '',\n                  question.settings.options.length\n                );\n              }}\n            >\n              Add {question.settings.options.length ? 'another' : 'an'} option\n            </button>\n          </p>\n        ) : null}\n\n        <p>\n          <label for={`${question.id}_calculation`}>\n            Statistic calculation:\n          </label>\n          <select\n            id={`${question.id}_calculation`}\n            value={question.settings.calculation}\n            onInput={e => {\n              updateTrackingQuestion(\n                question.id,\n                e.target.value,\n                'calculation',\n                true\n              );\n            }}\n          >\n            <option value=\"\">Select a calculation</option>\n            {question.type === 'number' && (\n              <option value=\"total\">Total/Sum</option>\n            )}\n            {question.type === 'number' && (\n              <option value=\"average\">Average</option>\n            )}\n            {question.type === 'options' && (\n              <option value=\"count\">Count</option>\n            )}\n          </select>\n        </p>\n      </div>\n    ))}\n  </div>\n);\n\nexport { TrackingQuestionList };\n\n\n\n// WEBPACK FOOTER //\n// ./components/TrackingQuestionList/index.js","export const pluralise = (string, count = 0, alt = '') => {\n  return count !== 1 ? alt || string + 's' : string;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/pluralise.js","import { h, Component } from 'preact';\nimport { slugify } from '../../utils/slugify';\nimport { pluralise } from '../../utils/pluralise';\nimport Traverse from '../../components/Traverse';\nimport { actions } from '../../store/actions';\nimport { connect } from 'unistore/preact';\nimport { TrackingQuestionList } from '../../components/TrackingQuestionList';\nimport { getPresetQuestions } from '../../utils/questions';\n\nclass AddStatistic extends Component {\n  state = {\n    trackingQuestions: [],\n    preset: '',\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n\n    this.state.trackingQuestions.forEach(question => {\n      this.props.db.set('trackingQuestions', question.id, question);\n    });\n\n    localStorage.setItem('MindPalace_onboarded', true);\n\n    window.location.href = '/settings/';\n  };\n\n  updateTrackingQuestion = (\n    id,\n    value,\n    attribute = 'text',\n    settings = false\n  ) => {\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === id);\n\n    if (!question) {\n      return;\n    }\n\n    if (settings) {\n      question.settings[attribute] = value;\n    } else {\n      question[attribute] = value;\n    }\n\n    this.setState({ trackingQuestions });\n  };\n\n  updateTrackingOption = (id, value, index, remove = false) => {\n    const trackingQuestions = [...this.state.trackingQuestions];\n    const question = trackingQuestions.find(x => x.id === id);\n\n    if (!question) {\n      return;\n    }\n\n    if (remove) {\n      question.settings.options.splice(index, 1);\n    } else {\n      question.settings.options[index] = value;\n    }\n\n    this.setState({ trackingQuestions });\n  };\n\n  createPreset = preset => {\n    let trackingQuestions = [];\n    const presets = getPresetQuestions();\n\n    if (presets[preset]) {\n      trackingQuestions = [...presets[preset]];\n      const groupId = slugify();\n      trackingQuestions.forEach((question, index) => {\n        question.id = slugify();\n        question.groupId = groupId;\n        question.createdAt += index;\n      });\n    }\n\n    this.setState({ preset, trackingQuestions });\n  };\n\n  render(props, { trackingQuestions, preset }) {\n    const buttons = [\n      ['Sleep tracking', 'sleep'],\n      ['Medicine log', 'medicine'],\n      ['Panic attack', 'panic'],\n      ['Musical instrument', 'musical'],\n      ['Running', 'running'],\n      ['Asthma log', 'asthma'],\n      ['Mood', 'mood'],\n      ['Discomfort', 'discomfort'],\n      ['Workout', 'workout'],\n      ['Custom numerical', 'number'],\n      ['Custom choices', 'choices'],\n      ['Yes/No switch', 'tickbox'],\n    ];\n\n    return (\n      <div class=\"wrap\">\n        <Traverse\n          title=\"Add a personal statistic to track\"\n          className=\"traverse--center mb20\"\n        />\n\n        <p>Choose a preset, or create a custom statistic:</p>\n        <div class=\"year-overview year-overview--center\">\n          {buttons.map(([label, value]) => (\n            <button\n              type=\"button\"\n              class=\"button button--grey\"\n              disabled={preset && preset !== value}\n              onClick={() => this.createPreset(value)}\n            >\n              {label}\n            </button>\n          ))}\n        </div>\n\n        {preset ? (\n          <form onSubmit={e => this.onSubmit(e)}>\n            <TrackingQuestionList\n              trackingQuestions={trackingQuestions}\n              updateTrackingQuestion={this.updateTrackingQuestion}\n              updateTrackingOption={this.updateTrackingOption}\n              hideActive\n            />\n\n            {trackingQuestions.length ? (\n              <input\n                type=\"submit\"\n                class=\"button mr20\"\n                value={pluralise('Add', trackingQuestions.length)}\n              />\n            ) : null}\n\n            <button\n              type=\"button\"\n              class=\"button--reset\"\n              onClick={() => this.createPreset('')}\n            >\n              Reset\n            </button>\n          </form>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  'settings, db',\n  actions\n)(AddStatistic);\n\n\n\n// WEBPACK FOOTER //\n// ./routes/add-statistic/index.js"],"sourceRoot":""}